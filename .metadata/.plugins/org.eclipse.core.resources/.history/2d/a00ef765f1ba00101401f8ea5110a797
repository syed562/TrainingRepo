package com.app.features;

import java.util.*;
import java.util.function.Consumer;
import java.util.function.Function;
import java.util.function.Predicate;
import java.util.stream.Collectors;
import java.util.stream.Stream;

import com.app.dto.Account;
import com.app.dto.Beneficiery;
import com.app.dto.Customer;

public class PaymentsOps {
public static void main(String[] args) {
	Account act=new Account("NIDHU","43545",3243);
	System.out.println("account details -"+act.accno()+" balance "+act.balance());
	PaymentsOps obj=new PaymentsOps();
	Beneficiery beneobj=new Beneficiery("James","sjh");
	var status=beneobj.validateBene("sabi");
	System.out.println(status);
	obj.fundtransfer(act, act, 120);
}

public boolean fundtransfer(Account acc1,Account acc2,double amnt) {
	
	var bal=acc2.balance();
	var acco=acc2.accno();
	var nameList=new ArrayList<String>();
	nameList.addAll(List.of("Sabi","Nidhu"));
	
	
	Predicate<String>prt=p->p.startsWith("J");
	Consumer<String>con=name->System.out.println("names "+name);
	//Function<String,STRING>FUNCOBJ= NAME->NAME
	nameList.stream().map(name->name.substring(0,3)).count();
	nameList.stream().filter(p ->p.startsWith("J")).forEach(name->System.out.println(name));
	nameList.stream().filter(prt).forEach(con);
	
	Account acct1=new Account("James","2442343",4343);
	Account acct2=new Account("Sabi","323232", 4312);
	List<Account>acctlist=List.of(acct1,acct2);
	List<Account>acctlist1=Arrays.asList(acct1,acct2);
	
	List<Account>sorted=acctlist.stream().sorted(Comparator.comparingDouble(Account::balance)).collect(Collectors.toList());
	
	
	sorted.forEach(a->System.out.println(a));
	
	acctlist1.stream().sorted().forEach(System.out::println);
	acctlist.stream().filter(p->p.balance()>2000).sorted().forEach(s->System.out.print(s.balance()));;
	
	Stream<Integer>strIn=Stream.of(1,2,3,454,66,33,234);
	strIn.sorted().forEach(a->System.out.println(a));
	//System.out.println(sorted);
	var companymap=new HashMap<String,List<Customer>>();
	companymap.put("CHUBB",List.of(new Customer("sabi", "dsdjhw@gmail.com","32443",322.2, 23)));
	if(acc1.balance()<amnt || amnt<0)
	      return false;
	else {
		return true;
	}
	
}

//public Account fundsTransfer(Account sender, Beneficiery receiver, double amount) {
//
//    // Predicate → check if sender has enough balance
//    Predicate<Account> checkBalance = acc -> acc.balance() >= amount;
//
//    // Predicate → validate beneficiary
//    Predicate<Beneficiery> checkBeneficiary = bene -> bene.validateBene(bene.name());
//
//    // Function → compute new updated sender balance
// 
//
//    // Consumer → log/print transfer details
//    Consumer<String> printMsg = msg -> System.out.println("INFO: " + msg);
//
//    // --- Execute validations using Predicates ---
//    if (!checkBalance.test(sender)) {
//        throw new IllegalArgumentException("❌ Insufficient balance!");
//    }
//
//    if (!checkBeneficiary.test(receiver)) {
//        throw new IllegalArgumentException("❌ Beneficiary validation failed!");
//    }
//
//    // --- Apply business update using Function ---
//    //Account updatedSender = updateSenderBalance.apply(sender);
//
//    // --- Display confirmation using Consumer ---
//    printMsg.accept("₹" + amount + " transferred to " +
//            receiver.name() + " (" + receiver.accno() + ")");
//
//    return updatedSender;
//}
}
